 2025-08-26
 ==========
 $Id:   aupost.php,v2.5.8d Aug 2025
 
                V2.5.6 // update ln43 as well
    2023-01-23  ln708 1444 Error msg and error handling when Australia Post servers are down
    2023-01-25  ln109-115 define more public vars
                ln126 logo initialised
                ln141 move her logo display to avoid icon loading on file opening and no quote selected
                ln114 116 123 change defines
    2023-02-01  data load select all options and make handling fee 2.00 on all, show handling fees
    2023-03-22  ln1230 1113 623 float + string
                replace all hard coded options with str_replace("_", "", and vars to ensure all undescores are removed
    2023-04-11  Local postage girth not used anymore - Aus Post based on max vol 0.25 cubic meters
                improved output formatting in debug lines
                define MODULE_SHIPPING_AUPOST_TAX_BASIS
    2023-09-10  correct cubing calc; change default parcel dimension label to Default PRODUCT dimension for those who do not read
    2023-09-11  ln77 checked parcel xml parameter name calculate vs estimate; BE CAREFUL estimate does not return secondary costs
    2023-09-12  v-.05; consolidated handling fees to submodule; all registered post references removes as this option is only
                available over the counter
    2023-09-17  if no dimensions for an item are provided, letters are not returned as an option. Too difficult to calulate.
                rechecked redundant codes eg 500g satchels are not evaulated. Austpost is again returning redundant codes.
    2023-09-29  ln743 added dims sent to debug table display
    2023-10-16  ln919 added AUSPARCELREGULAR
    2023-11-09  v a ln747 spelling error parcels
    2023-11-13  reorientate letter dimensions so largest is length; more letter debug output; correct tax
    2023-11-18  $shipping_num_boxes; change configuration group from 6 to 7 (6 was legacy setting)
    2023-12-18  ln 2 strict_types=1; add declared vars identified; ln859 863 494 strval
    2024-02-01  strval
    2024-02-13  strict types to be fixed in letters
    2024-02-13  ln690 1330 sizeof($methods) - check array exists; ln589 trimstring from strval
    2024-02-13  change CODES to Exclude AP option sthat require additional AP packaging eg excluded "AUS_PARCEL_REGULAR_PACKAGE_SMALL" 
                and only use "AUS_PARCEL_REGULAR"
	2024-07-16  check checkpost length, format, range of postcode
    2024-11-09  V2.5.6.e  initialised $methods = [] issue#16; revert to count on array
    2024-11-30  v2.5.7a   issue#19 Missing method 'id' for excess length, volume and weight quotes
	2025-07-01  v2.5.8 Changes for new rates and parcel sizes effective 01 July 2025
    2025-07-09  v2.5.8a Improved error msgs; output errors to log file; display dims as int as AP only shows as int now; improve handling 
                of MODULE_SHIPPING_AUPOST_COST_ON_ERROR eg TBA
    2025-07-17  v2.5.8b 2025-07-17 check for Constants on initial install
    2025-07-29  v2.5.8c Corrects the invalid configuration_group_id values as some of these are now built into ZenCart.
    2025-08-26  v2.5.8d check for from postcode and API key as some users ignore the warnings in the Admin config page. Write to error log and return without processing to avoid crash.
               Remove check for empty letter quote.
    
===========